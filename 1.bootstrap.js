(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,function(t,e,n){"use strict";n.r(e);var r=n(4),o=n.n(r),i=n(2);let c=document.getElementById("imageLoader");c.addEventListener("change",(function(t){let e=new FileReader;e.onload=function(t){let e=new Image;e.onload=()=>{s.width=160,s.height=160/e.width*e.height,u.drawImage(e,0,0,s.width,s.height)},e.src=t.target.result},e.readAsDataURL(t.target.files[0])}),!1);let s=document.getElementById("imageCanvas"),u=s.getContext("2d"),a=document.getElementById("loading"),l=document.getElementById("colorSlider"),d=document.getElementById("numColors"),g=document.getElementById("uploadBtn"),h=document.getElementById("renderBtn"),f=document.getElementById("settInfo"),w=7,_=!1,p=null,m=null,y=null;async function b(){let t=u.getImageData(0,0,s.width,s.height).data;console.log(t),Object(i.j)();let e=new i.a(t.length,t);console.log("made new tartan generator"),p=e.make_sett(w,64),m=p.get_sett_per_thread(),console.log(`made sett with ${p.get_count()} colors`);let n="[";for(let t=0;t<w;t++){let e=p.get_color(t);n+="\n  {",n+=`\n    r: ${e.get_r()}, `,n+=`\n    g: ${e.get_g()}, `,n+=`\n    b: ${e.get_b()}, `,n+="\n    count: "+e.get_count(),n+="\n  }",t!=w-1&&(n+=",")}n+="\n]",console.log("colors: ",n),_=!0,y&&y.draw()}function I(t){let e=t?y.width:y.height,n=t?y.height:y.width;for(let r=0;r<e/2;r++){let e=r%4-(t?2.5:1.5),o=r%m.get_count(),i=m.get_color(o);y.stroke(i.get_r(),i.get_g(),i.get_b());for(let o=e;o<n/2;o+=4){let e=t?r:o,n=t?o:r;y.line(2*e,2*n,2*(e+(t?0:2)),2*(n+(t?2:0)))}}}function v(){y&&_?(console.log("Drawing Sett"),y.strokeWeight(2),y.strokeCap(y.SQUARE),I(!0),I(!1),a&&(a.style.visibility="hidden")):y?console.warn("Attempted to draw tartan without sett"):_?console.warn("Attempted to draw tartan without p5 instance"):console.warn("Attempted to draw tartan without sett or p5 instance")}!function(){let t=new Image;w=l.value,k(),t.onload=()=>{s.width=160,s.height=160/t.width*t.height,u.drawImage(t,0,0,s.width,s.height),setTimeout(b,15)},t.src="./media/kandinsky.jpg"}();function E(t,e,n){let r=[t.toString(16),e.toString(16),n.toString(16)];for(let t in r)1==r[t].length&&(r[t]="0"+r[t]);return`#${r[0]}${r[1]}${r[2]}`}function k(){console.log("!!!!!!!!!!WHAT THE FUCK!!!!!!"),a&&(a.style.width=window.innerWidth-200+"px",a.style.visibility="visible")}new o.a(t=>{y=t,y.setup=()=>{y.createCanvas(y.windowWidth,y.windowHeight),y.noLoop(),y.draw()},y.windowResized=()=>{y.resizeCanvas(y.windowWidth,y.windowHeight),y.draw()},y.draw=()=>{y.background(255),v(),function(){if(f&&_){for(;f.hasChildNodes();)f.removeChild(f.firstChild);for(let t=0;t<w;t++){let e=p.get_color(t),n=E(e.get_r(),e.get_g(),e.get_b()),r=e.get_count(),o=document.createElement("DIV"),i=document.createElement("DIV");o.className="settItem",o.id="settItem"+t,i.className="settItemTxt",i.innerText=`${n}: ${r}`,o.style.backgroundColor=n,i.style.color=e.get_r()+e.get_g()+e.get_b()>382?"#000":"#fff",o.appendChild(i),f.appendChild(o)}}}()}}),d.innerText=l.value,l.oninput=()=>{d.innerText=l.value,w=l.value},h.onclick=()=>{k(),setTimeout(b,5)},g.onclick=()=>{c.click()}},function(t,e,n){"use strict";(function(t){n.d(e,"j",(function(){return h})),n.d(e,"a",(function(){return v})),n.d(e,"g",(function(){return E})),n.d(e,"h",(function(){return k})),n.d(e,"d",(function(){return C})),n.d(e,"f",(function(){return T})),n.d(e,"b",(function(){return x})),n.d(e,"c",(function(){return A})),n.d(e,"e",(function(){return B})),n.d(e,"i",(function(){return j}));var r=n(3);const o=new Array(32).fill(void 0);function i(t){return o[t]}o.push(void 0,null,!0,!1);let c=o.length;function s(t){const e=i(t);return function(t){t<36||(o[t]=c,c=t)}(t),e}let u,a=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function l(){return 0===u.byteLength&&(u=new Uint8Array(r.l.buffer)),u}function d(t,e){return a.decode(l().subarray(t,t+e))}function g(t){c===o.length&&o.push(o.length+1);const e=c;return c=o[e],o[e]=t,e}function h(){r.k()}a.decode();let f=0;function w(t,e){const n=e(1*t.length);return l().set(t,n/1),f=t.length,n}let _=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8");const p="function"==typeof _.encodeInto?function(t,e){return _.encodeInto(t,e)}:function(t,e){const n=_.encode(t);return e.set(n),{read:t.length,written:n.length}};let m;function y(){return 0===m.byteLength&&(m=new Int32Array(r.l.buffer)),m}class b{static __wrap(t){const e=Object.create(b.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.a(t)}get_r(){return r.j(this.ptr)}get_g(){return r.i(this.ptr)}get_b(){return r.g(this.ptr)}get_count(){return r.h(this.ptr)>>>0}}class I{static __wrap(t){const e=Object.create(I.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.b(t)}get_count(){return r.n(this.ptr)>>>0}get_color(t){const e=r.m(this.ptr,t);return 0===e?void 0:b.__wrap(e)}get_num_threads(){return r.o(this.ptr)>>>0}get_sett_per_thread(){const t=r.p(this.ptr);return I.__wrap(t)}}class v{static __wrap(t){const e=Object.create(v.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.c(t)}constructor(t,e){const n=w(e,r.e),o=f,i=r.s(t,n,o);return v.__wrap(i)}make_sett(t,e){const n=r.r(this.ptr,t,e);return I.__wrap(n)}}function E(t){s(t)}function k(t,e){return g(d(t,e))}function C(){return g(new Error)}function T(t,e){const n=function(t,e,n){if(void 0===n){const n=_.encode(t),r=e(n.length);return l().subarray(r,r+n.length).set(n),f=n.length,r}let r=t.length,o=e(r);const i=l();let c=0;for(;c<r;c++){const e=t.charCodeAt(c);if(e>127)break;i[o+c]=e}if(c!==r){0!==c&&(t=t.slice(c)),o=n(o,r,r=c+3*t.length);const e=l().subarray(o+c,o+r);c+=p(t,e).written}return f=c,o}(i(e).stack,r.e,r.f),o=f;y()[t/4+1]=o,y()[t/4+0]=n}function x(t,e){try{console.error(d(t,e))}finally{r.d(t,e)}}function A(t){console.log(i(t))}const B="function"==typeof Math.random?Math.random:($="Math.random",()=>{throw new Error($+" is not defined")});var $;function j(t,e){throw new Error(d(t,e))}m=new Int32Array(r.l.buffer),u=new Uint8Array(r.l.buffer)}).call(this,n(6)(t))},function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(2);r.t()}]]);